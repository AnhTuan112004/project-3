<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="vi">
<head>
    <title>Book List</title>
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
</head>
<body style="background: #ccc">
<section class="container my-3 bg-white">
    <h2>üìö Danh s√°ch S√°ch</h2>

    <a href="#" th:href="@{/books/new}" class="btn btn-success my-2">‚ûï Th√™m S√°ch M·ªõi</a>

    <table class="table table-bordered table-striped">
        <thead>
        <tr>
            <th>ID</th>
            <th>Code</th>
            <th>Name</th>
            <th>Image</th>
            <th>Quantity</th>
            <th>Price</th>
            <th>T√°c gi·∫£ & Vai tr√≤</th> <th>Actions</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="book : ${books}">

            <td th:text="${book.natid}">1</td>
            <td th:text="${book.natcode}">Code</td>
            <td th:text="${book.natname}">Name</td>

            <td>
                <img th:src="${book.natimgUrl ?: '/images/placeholder.png'}"
                     th:attr="alt=${book.natname}" style="width: 50px; height: 50px; object-fit: cover;" />
            </td>

            <td th:text="${book.natquantity}">Quantity</td>
            <td th:text="${#numbers.formatDecimal(book.natprice, 0, 'COMMA', 2, 'POINT')} + ' VNƒê'">Price</td>

            <td>
                <div th:each="ba : ${book.bookAuthors}" class="mb-1">
                    <span th:text="${ba.author.natname}"
                          class="mx-1 badge rounded-pill"
                          th:classappend="${ba.isPrimaryAuthor ? 'bg-primary text-white' : 'bg-secondary text-dark'}">
                    </span>

                    <span th:if="${ba.isPrimaryAuthor}" class="badge bg-info text-dark">
                        Ch·ªß bi√™n
                    </span>
                    <span th:unless="${ba.isPrimaryAuthor}" class="badge bg-light text-dark">
                        ƒê·ªìng t√°c gi·∫£
                    </span>
                </div>
            </td>

            <td class="actions">
                <a class="btn btn-sm btn-info me-2"
                   th:href="@{/books/edit/{natid}(natid=${book.natid})}">S·ª≠a</a>
                <a class="btn btn-sm btn-danger"
                   th:href="@{/books/delete/{natid}(natid=${book.natid})}"
                   onclick="return confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a cu·ªën s√°ch n√†y?');">X√≥a</a>
            </td>
        </tr>
        </tbody>
    </table>
</section>
</body>
</html>